<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
	    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet author="wluyima" id="20240102-1947">
        <preConditions onFail="MARK_RAN">
            <columnExists columnName="date_created" tableName="receiver_sync_msg" />
        </preConditions>
        <comment>Adding not null constraint to receiver_sync_msg.date_created column</comment>

        <addNotNullConstraint columnName="date_created" tableName="receiver_sync_msg" columnDataType="DATETIME(3)" />
    </changeSet>

    <changeSet author="wluyima" id="20240103-0840">
        <preConditions onFail="MARK_RAN">
            <columnExists columnName="site_id" tableName="receiver_retry_queue" />
        </preConditions>
        <comment>Adding not null constraint to receiver_retry_queue.site_id column</comment>

        <addNotNullConstraint columnName="site_id" tableName="receiver_retry_queue" columnDataType="BIGINT" />
    </changeSet>

    <changeSet author="wluyima" id="20240103-0841">
        <preConditions onFail="MARK_RAN">
            <columnExists columnName="site_id" tableName="receiver_conflict_queue" />
        </preConditions>
        <comment>Adding not null constraint to receiver_conflict_queue.site_id column</comment>

        <addNotNullConstraint columnName="site_id" tableName="receiver_conflict_queue" columnDataType="BIGINT" />
    </changeSet>

    <changeSet author="wluyima" id="20240103-0951">
        <preConditions onFail="MARK_RAN">
            <columnExists columnName="message_uuid" tableName="receiver_sync_msg" />
        </preConditions>
        <comment>Adding not null constraint to receiver_sync_msg.message_uuid column</comment>

        <addNotNullConstraint columnName="message_uuid" tableName="receiver_sync_msg" columnDataType="VARCHAR(38)" />
    </changeSet>

    <changeSet author="wluyima" id="20240103-0952">
        <preConditions onFail="MARK_RAN">
            <columnExists columnName="message_uuid" tableName="receiver_synced_msg" />
        </preConditions>
        <comment>Adding not null constraint to receiver_synced_msg.message_uuid column</comment>

        <addNotNullConstraint columnName="message_uuid" tableName="receiver_synced_msg" columnDataType="VARCHAR(38)" />
    </changeSet>

    <changeSet author="wluyima" id="20240103-0953">
        <preConditions onFail="MARK_RAN">
            <columnExists columnName="message_uuid" tableName="receiver_retry_queue" />
        </preConditions>
        <comment>Adding not null constraint to receiver_retry_queue.message_uuid column</comment>

        <addNotNullConstraint columnName="message_uuid" tableName="receiver_retry_queue" columnDataType="VARCHAR(38)" />
    </changeSet>

    <changeSet author="wluyima" id="20240103-0954">
        <preConditions onFail="MARK_RAN">
            <columnExists columnName="message_uuid" tableName="receiver_conflict_queue" />
        </preConditions>
        <comment>Adding not null constraint to receiver_conflict_queue.message_uuid column</comment>

        <addNotNullConstraint columnName="message_uuid" tableName="receiver_conflict_queue" columnDataType="VARCHAR(38)" />
    </changeSet>

</databaseChangeLog>
